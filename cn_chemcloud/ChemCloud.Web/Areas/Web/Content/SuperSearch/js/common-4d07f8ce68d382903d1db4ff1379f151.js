/****************************************************************************
 * Copyright (C) 2009-2010 GGA Software Services LLC
 * 
 * This file may be distributed and/or modified under the terms of the
 * GNU Affero General Public License version 3 as published by the Free
 * Software Foundation and appearing in the file LICENSE.GPL included in
 * the packaging of this file.
 * 
 * This file is provided AS IS with NO WARRANTY OF ANY KIND, INCLUDING THE
 * WARRANTY OF DESIGN, MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.
 ***************************************************************************/
window.util||(util={});var EventMap={mousemove:"mousemove",mousedown:"mousedown",mouseup:"mouseup"};Array.prototype.swap=function(e,t){var n=this[e];this[e]=this[t],this[t]=n},util.each=function(e,t,n){for(var r=0;r<e.length;++r)t.call(n,e[r],r)},util.array=function(e){var t=[],n=e.length;while(--n>=0)t[n]=e[n];return t},util.isEmpty=function(e){for(var t in e)return!1;return!0},util.stopEventPropagation=function(e){if("stopPropagation"in e)e.stopPropagation();else{if(!("cancelBubble"in e))throw Error("Browser unrecognized");e.cancelBubble=!0}},util.preventDefault=function(e){return"preventDefault"in e&&e.preventDefault(),Prototype.Browser.IE&&(e.returnValue=!1,e.keyCode=0),!1},util.setElementTextContent=function(e,t){if("textContent"in e)e.textContent=t;else{if(!("innerText"in e))throw Error("Browser unrecognized");e.innerText=t}},util.getElementTextContent=function(e){if("textContent"in e)return e.textContent;if("innerText"in e)return e.innerText;throw Error("Browser unrecognized")},util.stringPadded=function(e,t,n){e+="";var r="";while(e.length+r.length<t)r+=" ";return n?e+r:r+e},util.idList=function(e){var t=[];for(var n in e)t.push(n);return t},util.mapArray=function(e,t){var n=[];for(var r=0;r<e.length;++r)n.push(t[e[r]]);return n},util.apply=function(e,t){for(var n=0;n<e.length;++n)e[n]=t(e[n])},util.ifDef=function(e,t,n,r){e[n]=Object.isUndefined(t[n])?r:t[n]},util.ifDefList=function(e,t,n,r){e[n]=!Object.isUndefined(t[n])&&t[n]!=null?util.array(t[n]):r},util.identityMap=function(e){var t={};for(var n=0;n<e.length;++n)t[e[n]]=e[n];return t},util.stripRight=function(e){var t;for(t=0;t<e.length;++t)if(e[e.lenght-t-1]!=" ")break;return e.slice(0,e.length-t)},util.stripQuotes=function(e){return e[0]=='"'&&e[e.length-1]=='"'?e.substr(1,e.length-2):e},util.paddedFloat=function(e,t,n){var r=e.toFixed(n).replace(",",".");if(r.length>t)throw new Error("number does not fit");return util.stringPadded(r,t)},util.paddedInt=function(e,t){var n=e.toFixed(0);if(n.length>t)throw new Error("number does not fit");return util.stringPadded(n,t)},util.arrayAddIfMissing=function(e,t){for(var n=0;n<e.length;++n)if(e[n]==t)return!1;return e.push(t),!0};